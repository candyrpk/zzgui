var rubyTracker=angular.module("rubyTracker",["ngCookies","ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/login"),e.state("login",{url:"/login",templateUrl:"app/components/login/login.page.html",controller:"LoginController",pageTitle:"Login"}).state("app",{url:"/app","abstract":!0,templateUrl:"app/components/mainContent/main.page.html",controller:"InitController"}).state("app.dashboard",{url:"/dashboard",templateUrl:"app/components/dashboard/dashboard.page.html",controller:"DashboardController",pageTitle:"Dashboard"}).state("app.register",{url:"/register",templateUrl:"app/components/register/register.page.html",controller:"RegisterController",pageTitle:"Register"})}]).run(["$rootScope","$http","$state","$stateParams","$location","$cookies",function(e,t,o,r,a,l){e.$on("$stateChangeStart",function(t,o,r,l,n){e.pageTitle=o.pageTitle,console.log(a.path());var p=$.inArray(o.name,["login"])===-1,i=localStorage.getItem("globals");p&&!i&&a.path("/login")})}]);

"use strict";angular.module("rubyTracker").factory("AuthFactory",["$http","$cookies","$rootScope","$timeout",function(e,t,o,r){var s={};return console.log("factory"),s.Login=function(t,o){e({method:"POST",url:"http://futureprotech-testingurl.rhcloud.com/api/v1/loginuser",data:$.param({username:t.username,password:t.password}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e){e=e?{success:e.status,data:e.data}:{success:!1,message:"Username or password is incorrect"},o(e)})},s.SetCredentials=function(e,t,r){o.globals={currentUser:{username:e,token:r}},localStorage.setItem("globals",r)},s.ClearCredentials=function(){o.globals={},localStorage.setItem("globals","")},s}]);
angular.module("rubyTracker").controller("DashboardController",["$scope","$state","$location","AuthFactory",function(o,r,a,t){}]);

angular.module("rubyTracker").controller("LoginController",["$scope","$state","$location","AuthFactory",function(o,n,e,r){o.credentials={username:"",password:""},console.log("login"),o.authentication=function(o){r.Login(o,function(e){e.success?(r.SetCredentials(o.username,o.password,e.data),n.go("app.register")):console.log("error in login")})}}]);
angular.module("rubyTracker").service("LoginService",["$http","$q",function(e,r){var t=r.defer();this.auth=function(r){return e.post("http://futureprotech-testingurl.rhcloud.com/loginuser",r).then(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]);
angular.module("rubyTracker").controller("InitController",["$scope","$state","$location","AuthFactory",function(o,t,l,n){o.logout=function(){n.ClearCredentials(),t.go("login")}}]);
angular.module("rubyTracker").controller("RegisterController",["$scope","$state","$location","RegisterService",function(e,n,o,r){function c(e){i()}e.user={vcUsername:"admin",entity:{iUserType:1,vcName:"Admin",dtDOB:"28/11/1989",vcAddress:"No. 50, sencond cross, Kargil Nagar, velrampet, puducherry.",iPlacement:1,iTimeSlot:1,iInstitute:3,email:["surendar28111989@gmail.com","surendar28ih@gmail.com"],phone:[{iPhoneType:1,vcPhoneNumber:"9715261938"},{iPhoneType:2,vcPhoneNumber:"9715261931"}],course:[5,6]}},e.register=function(e){r.register(e,function(e){e.success?console.log(e):console.log("error in login")})};var i=function(){r.getReferenceData().then(function(e){console.log(e)},function(e){console.log(e)})};c()}]);
angular.module("rubyTracker").service("RegisterService",["$http","$q",function(i,I){var l=I.defer();this.register=function(I){return i({method:"POST",url:"http://futureprotech-testingurl.rhcloud.com/api/v1/registeruser",data:$.param(I),headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:localStorage.getItem("globals")}}).then(function(i){l.resolve(i)},function(i){l.reject(i)}),l.promise},this.getReferenceData=function(){var I="Bearer "+localStorage.getItem("globals");return console.log(I),i.get("http://futureprotech-testingurl.rhcloud.com/api/v1/getreference",{headers:{authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpVXNlciI6MjksInZjVXNlcm5hbWUiOiJzdXJlbmRhciIsImVudGl0eSI6eyJpRW50aXR5IjoyMSwiaVVzZXIiOjI5LCJpVXNlclR5cGUiOjIsInZjTmFtZSI6IkFkbWluIiwiZHRET0IiOm51bGwsInZjQWRkcmVzcyI6Ik5vLiA1MCwgc2VuY29uZCBjcm9zcywgS2FyZ2lsIE5hZ2FyLCB2ZWxyYW1wZXQsIHB1ZHVjaGVycnkuIiwiaVBsYWNlbWVudCI6MSwiaVRpbWVTbG90IjoxLCJpSW5zdGl0dXRlIjozLCJpbnN0aXR1dGUiOnsiaVJlZmVyZW5jZSI6MywidmNUaXRsZSI6ImlIb3JzZSIsInZjRGVzY3JpcHRpb24iOiJpSG9yc2UgU29mdHdhcmUiLCJ2Y0NvZGUiOiJJNDAwMCIsImlSZWZlcm5jZVR5cGUiOjEsImluc3RpdHV0ZV90eXBlIjp7ImlSZWZlcmVuY2VUeXBlIjoxLCJ2Y05hbWUiOiJpbnN0aXR1dGUifX0sInVzZXJ0eXBlIjp7ImlVc2VyVHlwZSI6MiwidmNSb2xlIjoiTWFya2V0aW5nIiwidmNEZXNjcmlwdGlvbiI6Ik1hcmtldGluZyJ9LCJlbWFpbCI6W3siaUVtYWlsSWQiOjI1LCJ2Y0VtYWlsIjoic3VyZW5kYXIyODExODlAZ21haWwuY29tIiwiaUVudGl0eSI6MjF9XSwicGhvbmUiOlt7ImlQaG9uZSI6MzgsInZjUGhvbmVOdW1iZXIiOiI5NzE1MjYxOTM2IiwiaUNyZWF0ZWRCeSI6MjAsImlVcGRhdGVkQnkiOjIwLCJiU3RhdHVzIjp0cnVlLCJpRW50aXR5IjoyMSwiaVBob25lVHlwZSI6MX1dLCJjb3Vyc2VfbGlzdCI6W3siaUVudGl0eUNvdXJzZSI6MjcsImlDb3VzZUlkIjo1LCJpRW50aXR5IjoyMSwiY291cnNlIjp7ImlSZWZlcmVuY2UiOjUsInZjVGl0bGUiOiJDIiwidmNEZXNjcmlwdGlvbiI6IkMgUHJvZ3JhbWluZyIsInZjQ29kZSI6IkM1MDAxIiwiaVJlZmVybmNlVHlwZSI6MiwiY291cnNlX3R5cGUiOnsiaVJlZmVyZW5jZVR5cGUiOjIsInZjTmFtZSI6ImNvdXJzZSJ9fX0seyJpRW50aXR5Q291cnNlIjoyOCwiaUNvdXNlSWQiOjYsImlFbnRpdHkiOjIxLCJjb3Vyc2UiOnsiaVJlZmVyZW5jZSI6NiwidmNUaXRsZSI6IkMrKyIsInZjRGVzY3JpcHRpb24iOiJDKysgUHJvZ3JhbWluZyIsInZjQ29kZSI6IkM1MDAyIiwiaVJlZmVybmNlVHlwZSI6MiwiY291cnNlX3R5cGUiOnsiaVJlZmVyZW5jZVR5cGUiOjIsInZjTmFtZSI6ImNvdXJzZSJ9fX1dfSwiaWF0IjoxNDcxNzkwOTMzfQ.i9lpC2M528SjS4LmExcCGXt6ugoc7ZUeIUXdksiGtVY"}}).then(function(i){l.resolve(i)},function(i){l.reject(i)}),l.promise}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJhcHAucm91dGVzLmpzIiwiYXV0aC5mYWN0b3J5LmpzIiwiZGFzaGJvYXJkL2Rhc2hib2FyZC5jb250cm9sbGVyLmpzIiwiZGFzaGJvYXJkL2Rhc2hib2FyZC5zZXJ2aWNlLmpzIiwibG9naW4vbG9naW4uY29udHJvbGxlci5qcyIsImxvZ2luL2xvZ2luLnNlcnZpY2UuanMiLCJtYWluQ29udGVudC9tYWluLmNvbnRyb2xsZXIuanMiLCJyZWdpc3Rlci9yZWdpc3Rlci5jb250cm9sbGVyLmpzIiwicmVnaXN0ZXIvcmVnaXN0ZXIuc2VydmljZS5qcyJdLCJuYW1lcyI6WyJydWJ5VHJhY2tlciIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIm90aGVyd2lzZSIsInN0YXRlIiwidXJsIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwicGFnZVRpdGxlIiwiYWJzdHJhY3QiLCJydW4iLCIkcm9vdFNjb3BlIiwiJGh0dHAiLCIkc3RhdGUiLCIkc3RhdGVQYXJhbXMiLCIkbG9jYXRpb24iLCIkY29va2llcyIsIiRvbiIsImV2ZW50IiwidG9TdGF0ZSIsInRvUGFyYW1zIiwiZnJvbVN0YXRlIiwiZnJvbVBhcmFtcyIsImNvbnNvbGUiLCJsb2ciLCJwYXRoIiwicmVzdHJpY3RlZFBhZ2UiLCIkIiwiaW5BcnJheSIsIm5hbWUiLCJsb2dnZWRJbiIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJmYWN0b3J5IiwiJHRpbWVvdXQiLCJzZXJ2aWNlIiwiTG9naW4iLCJwYXJhbXMiLCJjYWxsYmFjayIsIm1ldGhvZCIsImRhdGEiLCJwYXJhbSIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJoZWFkZXJzIiwiQ29udGVudC1UeXBlIiwic3VjY2VzcyIsInJlc3BvbnNlIiwic3RhdHVzIiwibWVzc2FnZSIsIlNldENyZWRlbnRpYWxzIiwidG9rZW4iLCJnbG9iYWxzIiwiY3VycmVudFVzZXIiLCJzZXRJdGVtIiwiQ2xlYXJDcmVkZW50aWFscyIsIiRzY29wZSIsIkF1dGhGYWN0b3J5IiwiY3JlZGVudGlhbHMiLCJhdXRoZW50aWNhdGlvbiIsImdvIiwiJHEiLCJkZWZlcnJlZCIsImRlZmVyIiwidGhpcyIsImF1dGgiLCJjcmV0ZW50aWFscyIsInBvc3QiLCJ0aGVuIiwicmVzb2x2ZSIsImVycm9yIiwicmVqZWN0IiwicHJvbWlzZSIsImxvZ291dCIsIlJlZ2lzdGVyU2VydmljZSIsImluaXQiLCJnZXRSZWZlcmVuY2VEYXRhIiwidXNlciIsInZjVXNlcm5hbWUiLCJlbnRpdHkiLCJpVXNlclR5cGUiLCJ2Y05hbWUiLCJkdERPQiIsInZjQWRkcmVzcyIsImlQbGFjZW1lbnQiLCJpVGltZVNsb3QiLCJpSW5zdGl0dXRlIiwiZW1haWwiLCJwaG9uZSIsImlQaG9uZVR5cGUiLCJ2Y1Bob25lTnVtYmVyIiwiY291cnNlIiwicmVnaXN0ZXIiLCJyZXMiLCJBdXRob3JpemF0aW9uIiwiZ2V0IiwiYXV0aG9yaXphdGlvbiIsImVyciJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBSUEsYUFBY0MsUUFBUUMsT0FBTyxlQUFnQixZQUFhLGNBQzdEQyxRQUFRLGlCQUFrQixxQkFBc0IsU0FBVUMsRUFBZ0JDLEdBZXpFQSxFQUFtQkMsVUFBVSxVQUc3QkYsRUFDR0csTUFBTSxTQUNMQyxJQUFLLFNBQ0xDLFlBQWEsdUNBQ2JDLFdBQVksa0JBQ1pDLFVBQVcsVUFFWkosTUFBTSxPQUNMQyxJQUFLLE9BQ0xJLFlBQVUsRUFDVkgsWUFBYSw0Q0FDYkMsV0FBWSxtQkFFYkgsTUFBTSxpQkFDTEMsSUFBSyxhQUNMQyxZQUFhLCtDQUNiQyxXQUFZLHNCQUNaQyxVQUFXLGNBRVpKLE1BQU0sZ0JBQ0xDLElBQUssWUFDTEMsWUFBYSw2Q0FDYkMsV0FBWSxxQkFDWkMsVUFBVyxnQkFFYkUsS0FBSyxhQUFjLFFBQVMsU0FBVSxlQUFnQixZQUFhLFdBQVksU0FBVUMsRUFBWUMsRUFBT0MsRUFBUUMsRUFBY0MsRUFB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LFFBQ0EsRUFDQSxLQUtSbkMsRUFBT29DLFNBQVcsU0FBVXZELEdBQ3hCcUMsRUFBZ0JrQixTQUFTdkQsRUFBUSxTQUFVVSxHQUNuQ0EsRUFBU0QsUUFDVHZCLFFBQVFDLElBQUl1QixHQUVaeEIsUUFBUUMsSUFBSSxvQkFLeEIsSUFBSW9ELEdBQW1CLFdBQ25CRixFQUFnQkUsbUJBQW1CUixLQUFNLFNBQVV5QixHQUMvQ3RFLFFBQVFDLElBQUlxRSxJQUViLFNBQVV2QixHQUNUL0MsUUFBUUMsSUFBSThDLEtBT3BCSztBQ3hESjdFLFFBQVFDLE9BQU8sZUFBZW9DLFFBQVEsbUJBQW9CLFFBQVMsS0FBTSxTQUFTdkIsRUFBT2lELEdBRXJGLEdBQUlDLEdBQVdELEVBQUdFLE9BQ2xCQyxNQUFLNEIsU0FBVyxTQUFVdkQsR0FldEIsTUFkQXpCLElBQ0kyQixPQUFRLE9BQ1JsQyxJQUFLLGtFQUNMbUMsS0FBTWIsRUFBRWMsTUFBTUosR0FDZE8sU0FDSUMsZUFBZ0Isb0NBQ2hCaUQsY0FBaUIvRCxhQUFhQyxRQUFRLGNBRTNDb0MsS0FBSyxTQUFTckIsR0FDYmUsRUFBU08sUUFBUXRCLElBQ2xCLFNBQVN1QixHQUNSUixFQUFTUyxPQUFPRCxLQUdiUixFQUFTVSxTQU1wQlIsS0FBS1ksaUJBQW1CLFdBQ3BCLEdBQUl6QixHQUFRLFVBQVlwQixhQUFhQyxRQUFRLFVBcUI3QyxPQXBCQVQsU0FBUUMsSUFBSTJCLEdBVVh2QyxFQUFNbUYsSUFBSSxtRUFDUG5ELFNBQ0lvRCxjQUFpQiw0a0RBRXRCNUIsS0FBSyxTQUFVckIsR0FDZGUsRUFBU08sUUFBUXRCLElBQ2xCLFNBQVVrRCxHQUNUbkMsRUFBU1MsT0FBTzBCLEtBR2JuQyxFQUFTVSIsImZpbGUiOiJhcHBsaWNhdGlvbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgcnVieVRyYWNrZXIgPSBhbmd1bGFyLm1vZHVsZSgncnVieVRyYWNrZXInLCBbXCJuZ0Nvb2tpZXNcIiwgXCJ1aS5yb3V0ZXJcIl0pXHJcbi5jb25maWcoWyckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLCBmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xyXG4gICAgLy8gdmFyIGF1dGhlbnRpY2F0ZWQgPSBbJyRxJywgJ0F1dGhGYWN0b3J5JywgZnVuY3Rpb24gKCRxLCBBdXRoRmFjdG9yeSkge1xyXG4gICAgLy8gICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XHJcbiAgICAvLyAgICAgQXV0aEZhY3RvcnkuaXNMb2dnZWRJbigpXHJcbiAgICAvLyAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChpc0xvZ2dlZEluKSB7XHJcbiAgICAvLyAgICAgICAgICAgICBpZiAoaXNMb2dnZWRJbikge1xyXG4gICAgLy8gICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcclxuICAgIC8vICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCdOb3QgbG9nZ2VkIGluJyk7XHJcbiAgICAvLyAgICAgICAgICAgICB9XHJcbiAgICAvLyAgICAgICAgIH0pO1xyXG4gICAgLy8gICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgLy8gfV07XHJcbiAgXHJcbi8vICAgRm9yIGFueSB1bm1hdGNoZWQgdXJsLCByZWRpcmVjdCB0byAvc3RhdGUxXHJcbiAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShcIi9sb2dpblwiKTtcclxuICBcclxuLy8gICBOb3cgc2V0IHVwIHRoZSBzdGF0ZXNcclxuICAkc3RhdGVQcm92aWRlclxyXG4gICAgLnN0YXRlKCdsb2dpbicsIHtcclxuICAgICAgdXJsOiBcIi9sb2dpblwiLFxyXG4gICAgICB0ZW1wbGF0ZVVybDogXCJhcHAvY29tcG9uZW50cy9sb2dpbi9sb2dpbi5wYWdlLmh0bWxcIixcclxuICAgICAgY29udHJvbGxlcjogJ0xvZ2luQ29udHJvbGxlcicsXHJcbiAgICAgIHBhZ2VUaXRsZTogJ0xvZ2luJ1xyXG4gICAgfSlcclxuICAgIC5zdGF0ZSgnYXBwJywge1xyXG4gICAgICB1cmw6IFwiL2FwcFwiLFxyXG4gICAgICBhYnN0cmFjdDogdHJ1ZSxcclxuICAgICAgdGVtcGxhdGVVcmw6IFwiYXBwL2NvbXBvbmVudHMvbWFpbkNvbnRlbnQvbWFpbi5wYWdlLmh0bWxcIixcclxuICAgICAgY29udHJvbGxlcjogJ0luaXRDb250cm9sbGVyJ1xyXG4gICAgfSlcclxuICAgIC5zdGF0ZSgnYXBwLmRhc2hib2FyZCcsIHtcclxuICAgICAgdXJsOiBcIi9kYXNoYm9hcmRcIixcclxuICAgICAgdGVtcGxhdGVVcmw6IFwiYXBwL2NvbXBvbmVudHMvZGFzaGJvYXJkL2Rhc2hib2FyZC5wYWdlLmh0bWxcIixcclxuICAgICAgY29udHJvbGxlcjogJ0Rhc2hib2FyZENvbnRyb2xsZXInLFxyXG4gICAgICBwYWdlVGl0bGU6ICdEYXNoYm9hcmQnXHJcbiAgICB9KVxyXG4gICAgLnN0YXRlKCdhcHAucmVnaXN0ZXInLCB7XHJcbiAgICAgIHVybDogXCIvcmVnaXN0ZXJcIixcclxuICAgICAgdGVtcGxhdGVVcmw6IFwiYXBwL2NvbXBvbmVudHMvcmVnaXN0ZXIvcmVnaXN0ZXIucGFnZS5odG1sXCIsXHJcbiAgICAgIGNvbnRyb2xsZXI6ICdSZWdpc3RlckNvbnRyb2xsZXInLFxyXG4gICAgICBwYWdlVGl0bGU6ICdSZWdpc3RlcidcclxuICAgIH0pO1xyXG59XSkucnVuKFsnJHJvb3RTY29wZScsICckaHR0cCcsICckc3RhdGUnLCAnJHN0YXRlUGFyYW1zJywgJyRsb2NhdGlvbicsICckY29va2llcycsIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkaHR0cCwgJHN0YXRlLCAkc3RhdGVQYXJhbXMsICRsb2NhdGlvbiwgJGNvb2tpZXMpIHtcclxuICAgIC8vJHJvb3RTY29wZS5wYWdlVGl0bGUgPSAkc3RhdGUuY3VycmVudC5wYWdlVGl0bGU7XHJcbiAgICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3RhcnQnLFxyXG4gICAgICAgIGZ1bmN0aW9uIChldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcykge1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLnBhZ2VUaXRsZSA9IHRvU3RhdGUucGFnZVRpdGxlO1xyXG4gICAgICAgICAgICAvLyB0cmFuc2l0aW9uVG8oKSBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aFxyXG4gICAgICAgICAgICAvLyBhICd0cmFuc2l0aW9uIHByZXZlbnRlZCcgZXJyb3JcclxuICAgICAgICAgICAgLy8gcmVkaXJlY3QgdG8gbG9naW4gcGFnZSBpZiBub3QgbG9nZ2VkIGluIGFuZCB0cnlpbmcgdG8gYWNjZXNzIGEgcmVzdHJpY3RlZCBwYWdlXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCRsb2NhdGlvbi5wYXRoKCkpO1xyXG4gICAgICAgICAgICB2YXIgcmVzdHJpY3RlZFBhZ2UgPSAkLmluQXJyYXkodG9TdGF0ZS5uYW1lLCBbJ2xvZ2luJ10pID09PSAtMTtcclxuICAgICAgICAgICAgdmFyIGxvZ2dlZEluID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dsb2JhbHMnKTtcclxuICAgICAgICAgICAgaWYgKHJlc3RyaWN0ZWRQYWdlICYmICFsb2dnZWRJbikge1xyXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9sb2dpbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxufV0pOyIsIiIsIi8vIGFuZ3VsYXIubW9kdWxlKCdydWJ5VHJhY2tlcicpLmZhY3RvcnkoJ0F1dGhGYWN0b3J5JywgWyckcScsICckcm9vdFNjb3BlJywgJyRodHRwJywgJyRzdGF0ZScsXHJcbi8vICAgICBmdW5jdGlvbiAoJHEsICRyb290U2NvcGUsICRodHRwLCAkc3RhdGUpIHtcclxuLy8gICAgICAgICB2YXIgY3VycmVudFVzZXIgPSAnJztcclxuLy8gICAgICAgICB2YXIgZmFjdG9yeSA9IHtcclxuLy8gICAgICAgICAgICAgaXNMb2dnZWRJbjogaXNMb2dnZWRJbixcclxuLy8gICAgICAgICAgICAgZ2V0Q3VycmVudFVzZXI6IGdldFVzZXJJbmZvXHJcbi8vICAgICAgICAgfTtcclxuXHJcbi8vICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTtcclxuLy8gICAgICAgICBmdW5jdGlvbiBpc0xvZ2dlZEluKCkge1xyXG4vLyAgICAgICAgICAgICB2YXIgdXNlcl9pZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyX2lkJyk7XHJcbi8vICAgICAgICAgICAgIGlmICh1c2VyX2lkKSB7XHJcbi8vICAgICAgICAgICAgICAgICB2YXIgdXJsID0gd2luZG93LmRvbWFpblVSTCArICd1c2VyLycgKyB1c2VyX2lkO1xyXG4vLyAgICAgICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwpLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlcykge1xyXG4vLyAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXIgPSByZXM7XHJcbi8vICAgICAgICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdsb2dpbicpO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgIC8vIGlmKGVyci5zdGF0dXMgPT0gNDAxKSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgLy8gICAgICRzdGF0ZS5nbygnbG9naW4nKTtcclxuLy8gICAgICAgICAgICAgICAgICAgICAvLyB9XHJcbi8vICAgICAgICAgICAgICAgICB9KTtcclxuLy8gICAgICAgICAgICAgfSBlbHNlIHtcclxuLy8gICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoZmFsc2UpO1xyXG4vLyAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdsb2dpbicpO1xyXG4vLyAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7XHJcbi8vICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICB9O1xyXG5cclxuLy8gICAgICAgICBmdW5jdGlvbiBnZXRVc2VySW5mbygpIHtcclxuLy8gICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRVc2VyO1xyXG4vLyAgICAgICAgIH07XHJcbi8vICAgICAgICAgcmV0dXJuIGZhY3Rvcnk7XHJcbi8vICAgICB9XSk7XHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG5hbmd1bGFyLm1vZHVsZSgncnVieVRyYWNrZXInKS5mYWN0b3J5KCdBdXRoRmFjdG9yeScsXHJcbiAgICBbJyRodHRwJywgJyRjb29raWVzJywgJyRyb290U2NvcGUnLCAnJHRpbWVvdXQnLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkaHR0cCwgJGNvb2tpZXMsICRyb290U2NvcGUsICR0aW1lb3V0KSB7XHJcbiAgICAgICAgICAgIHZhciBzZXJ2aWNlID0ge307XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdmYWN0b3J5Jyk7XHJcbiAgICAgICAgICAgIC8vJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5wb3N0WydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgnO1xyXG4gICAgICAgICAgICBzZXJ2aWNlLkxvZ2luID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIC8qIFVzZSB0aGlzIGZvciByZWFsIGF1dGhlbnRpY2F0aW9uXHJcbiAgICAgICAgICAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbiAgICAgICAgICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgICAgIHVybDogXCJodHRwOi8vZnV0dXJlcHJvdGVjaC10ZXN0aW5ndXJsLnJoY2xvdWQuY29tL2FwaS92MS9sb2dpbnVzZXJcIixcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiAkLnBhcmFtKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ1c2VybmFtZVwiOiBwYXJhbXMudXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwicGFzc3dvcmRcIjogcGFyYW1zLnBhc3N3b3JkXHJcbiAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgfVxyXG4gICAgICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IHsgc3VjY2VzczogcmVzcG9uc2Uuc3RhdHVzLCBkYXRhOiByZXNwb25zZS5kYXRhIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdVc2VybmFtZSBvciBwYXNzd29yZCBpcyBpbmNvcnJlY3QnIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBzZXJ2aWNlLlNldENyZWRlbnRpYWxzID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBwYXNzd29yZCwgdG9rZW4pIHtcclxuXHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmdsb2JhbHMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogdG9rZW5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSAnQmVhcmVyICcgKyB0b2tlbjsgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcbiAgICAgICAgICAgICAgICAvLyRjb29raWVzLnB1dCgnZ2xvYmFscycsIHdpbmRvdy5idG9hKCRyb290U2NvcGUuZ2xvYmFscykpO1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2dsb2JhbHMnLCB0b2tlbik7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBzZXJ2aWNlLkNsZWFyQ3JlZGVudGlhbHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmdsb2JhbHMgPSB7fTtcclxuICAgICAgICAgICAgICAgIC8vJGNvb2tpZXMucmVtb3ZlKCdnbG9iYWxzJyk7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZ2xvYmFscycsJycpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2U7XHJcbiAgICAgICAgfV0pO1xyXG5cclxuIiwiYW5ndWxhci5tb2R1bGUoJ3J1YnlUcmFja2VyJylcclxuLmNvbnRyb2xsZXIoJ0Rhc2hib2FyZENvbnRyb2xsZXInLCBbJyRzY29wZScsICckc3RhdGUnLCAnJGxvY2F0aW9uJywgJ0F1dGhGYWN0b3J5JywgZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlLCAkbG9jYXRpb24sIEF1dGhGYWN0b3J5KSB7XHJcblxyXG59XSk7IiwiIiwiYW5ndWxhci5tb2R1bGUoJ3J1YnlUcmFja2VyJykuY29udHJvbGxlcignTG9naW5Db250cm9sbGVyJywgWyckc2NvcGUnLCAnJHN0YXRlJywgJyRsb2NhdGlvbicsICdBdXRoRmFjdG9yeScsIGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZSwgJGxvY2F0aW9uLCBBdXRoRmFjdG9yeSkge1xyXG4gICAgJHNjb3BlLmNyZWRlbnRpYWxzID0ge1xyXG4gICAgICAgIHVzZXJuYW1lOiAnJyxcclxuICAgICAgICBwYXNzd29yZDogJydcclxuICAgIH07XHJcbiAgICBjb25zb2xlLmxvZygnbG9naW4nKTtcclxuICAgICRzY29wZS5hdXRoZW50aWNhdGlvbiA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcclxuICAgICAgICBBdXRoRmFjdG9yeS5Mb2dpbihwYXJhbXMsIGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgQXV0aEZhY3RvcnkuU2V0Q3JlZGVudGlhbHMocGFyYW1zLnVzZXJuYW1lLCBwYXJhbXMucGFzc3dvcmQsIHJlc3BvbnNlLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdhcHAucmVnaXN0ZXInKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3IgaW4gbG9naW5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbn1dKTsiLCJhbmd1bGFyLm1vZHVsZSgncnVieVRyYWNrZXInKS5zZXJ2aWNlKCdMb2dpblNlcnZpY2UnLCBbJyRodHRwJywgJyRxJywgZnVuY3Rpb24oJGh0dHAsICRxKSB7XHJcblxyXG4gICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuICAgIHRoaXMuYXV0aCA9IGZ1bmN0aW9uIChjcmV0ZW50aWFscykge1xyXG4gICAgICAgICRodHRwLnBvc3QoXCJodHRwOi8vZnV0dXJlcHJvdGVjaC10ZXN0aW5ndXJsLnJoY2xvdWQuY29tL2xvZ2ludXNlclwiLGNyZXRlbnRpYWxzKVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzcG9uc2UpO1xyXG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgfSBcclxufV0pIiwiYW5ndWxhci5tb2R1bGUoJ3J1YnlUcmFja2VyJylcclxuLmNvbnRyb2xsZXIoJ0luaXRDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJHN0YXRlJywgJyRsb2NhdGlvbicsICdBdXRoRmFjdG9yeScsIGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZSwgJGxvY2F0aW9uLCBBdXRoRmFjdG9yeSkge1xyXG4gICAgJHNjb3BlLmxvZ291dCA9ZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIEF1dGhGYWN0b3J5LkNsZWFyQ3JlZGVudGlhbHMoKTtcclxuICAgICAgICAkc3RhdGUuZ28oJ2xvZ2luJyk7ICAgXHJcbiAgICB9XHJcbn1dKTsiLCJhbmd1bGFyLm1vZHVsZSgncnVieVRyYWNrZXInKVxyXG4uY29udHJvbGxlcignUmVnaXN0ZXJDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJHN0YXRlJywgJyRsb2NhdGlvbicsICdSZWdpc3RlclNlcnZpY2UnLCBmdW5jdGlvbiAoJHNjb3BlLCAkc3RhdGUsICRsb2NhdGlvbiwgUmVnaXN0ZXJTZXJ2aWNlKSB7XHJcblxyXG4gICAgJHNjb3BlLnVzZXIgPSB7XHJcbiAgICAgICAgXCJ2Y1VzZXJuYW1lXCI6IFwiYWRtaW5cIixcclxuICAgICAgICBcImVudGl0eVwiOiB7XHJcbiAgICAgICAgICAgIFwiaVVzZXJUeXBlXCI6IDEsXHJcbiAgICAgICAgICAgIFwidmNOYW1lXCI6IFwiQWRtaW5cIixcclxuICAgICAgICAgICAgXCJkdERPQlwiOiBcIjI4LzExLzE5ODlcIixcclxuICAgICAgICAgICAgXCJ2Y0FkZHJlc3NcIjogXCJOby4gNTAsIHNlbmNvbmQgY3Jvc3MsIEthcmdpbCBOYWdhciwgdmVscmFtcGV0LCBwdWR1Y2hlcnJ5LlwiLFxyXG4gICAgICAgICAgICBcImlQbGFjZW1lbnRcIjogMSxcclxuICAgICAgICAgICAgXCJpVGltZVNsb3RcIjogMSxcclxuICAgICAgICAgICAgXCJpSW5zdGl0dXRlXCI6IDMsXHJcbiAgICAgICAgICAgIFwiZW1haWxcIjogW1xyXG4gICAgICAgICAgICBcInN1cmVuZGFyMjgxMTE5ODlAZ21haWwuY29tXCIsXHJcbiAgICAgICAgICAgIFwic3VyZW5kYXIyOGloQGdtYWlsLmNvbVwiXHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIFwicGhvbmVcIjogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcImlQaG9uZVR5cGVcIjogMSxcclxuICAgICAgICAgICAgICAgIFwidmNQaG9uZU51bWJlclwiOiBcIjk3MTUyNjE5MzhcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcImlQaG9uZVR5cGVcIjogMixcclxuICAgICAgICAgICAgICAgIFwidmNQaG9uZU51bWJlclwiOiBcIjk3MTUyNjE5MzFcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIFwiY291cnNlXCI6IFtcclxuICAgICAgICAgICAgNSxcclxuICAgICAgICAgICAgNlxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUucmVnaXN0ZXIgPSBmdW5jdGlvbiAocGFyYW1zKSB7XHJcbiAgICAgICAgUmVnaXN0ZXJTZXJ2aWNlLnJlZ2lzdGVyKHBhcmFtcywgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yIGluIGxvZ2luXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGdldFJlZmVyZW5jZURhdGEgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgUmVnaXN0ZXJTZXJ2aWNlLmdldFJlZmVyZW5jZURhdGEoKS50aGVuKCBmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcblxyXG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpbml0KHBhcmFtcykge1xyXG4gICAgICAgIGdldFJlZmVyZW5jZURhdGEoKTtcclxuICAgIH1cclxuICAgIGluaXQoKTtcclxufV0pOyIsImFuZ3VsYXIubW9kdWxlKCdydWJ5VHJhY2tlcicpLnNlcnZpY2UoJ1JlZ2lzdGVyU2VydmljZScsIFsnJGh0dHAnLCAnJHEnLCBmdW5jdGlvbigkaHR0cCwgJHEpIHtcclxuXHJcbiAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgdGhpcy5yZWdpc3RlciA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcclxuICAgICAgICAkaHR0cCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICB1cmw6IFwiaHR0cDovL2Z1dHVyZXByb3RlY2gtdGVzdGluZ3VybC5yaGNsb3VkLmNvbS9hcGkvdjEvcmVnaXN0ZXJ1c2VyXCIsXHJcbiAgICAgICAgICAgIGRhdGE6ICQucGFyYW0ocGFyYW1zKSxcclxuICAgICAgICAgICAgaGVhZGVyczogeyBcclxuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcclxuICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dsb2JhbHMnKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcclxuICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xyXG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgIH0gXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgcmVmZXJlbmNlIGRhdGEgZm9yIHJlZ2lzdHJhdGlvbiBmb3JtXHJcbiAgICAgKi9cclxuICAgIHRoaXMuZ2V0UmVmZXJlbmNlRGF0YSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgdG9rZW4gPSAnQmVhcmVyICcgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ2xvYmFscycpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHRva2VuKTtcclxuICAgICAgICAvLyAkaHR0cC5nZXQoXCJodHRwOi8vZnV0dXJlcHJvdGVjaC10ZXN0aW5ndXJsLnJoY2xvdWQuY29tL2FwaS92MS9nZXRyZWZlcmVuY2VcIiwge1xyXG4gICAgICAgIC8vICAgICBoZWFkZXJzOiB7IFxyXG4gICAgICAgIC8vICAgICAgICAgJ2F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyB0b2tlblxyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfSkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgIC8vICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcclxuICAgICAgICAvLyB9LCBmdW5jdGlvbihlcnJvcikge1xyXG4gICAgICAgIC8vICAgICBkZWZlcnJlZC5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIC8vIH0pO1xyXG4gICAgICAgICAkaHR0cC5nZXQoXCJodHRwOi8vZnV0dXJlcHJvdGVjaC10ZXN0aW5ndXJsLnJoY2xvdWQuY29tL2FwaS92MS9nZXRyZWZlcmVuY2VcIiwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICBcImF1dGhvcml6YXRpb25cIjogXCJCZWFyZXIgZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5LmV5SnBWWE5sY2lJNk1qa3NJblpqVlhObGNtNWhiV1VpT2lKemRYSmxibVJoY2lJc0ltVnVkR2wwZVNJNmV5SnBSVzUwYVhSNUlqb3lNU3dpYVZWelpYSWlPakk1TENKcFZYTmxjbFI1Y0dVaU9qSXNJblpqVG1GdFpTSTZJa0ZrYldsdUlpd2laSFJFVDBJaU9tNTFiR3dzSW5aalFXUmtjbVZ6Y3lJNklrNXZMaUExTUN3Z2MyVnVZMjl1WkNCamNtOXpjeXdnUzJGeVoybHNJRTVoWjJGeUxDQjJaV3h5WVcxd1pYUXNJSEIxWkhWamFHVnljbmt1SWl3aWFWQnNZV05sYldWdWRDSTZNU3dpYVZScGJXVlRiRzkwSWpveExDSnBTVzV6ZEdsMGRYUmxJam96TENKcGJuTjBhWFIxZEdVaU9uc2lhVkpsWm1WeVpXNWpaU0k2TXl3aWRtTlVhWFJzWlNJNkltbEliM0p6WlNJc0luWmpSR1Z6WTNKcGNIUnBiMjRpT2lKcFNHOXljMlVnVTI5bWRIZGhjbVVpTENKMlkwTnZaR1VpT2lKSk5EQXdNQ0lzSW1sU1pXWmxjbTVqWlZSNWNHVWlPakVzSW1sdWMzUnBkSFYwWlY5MGVYQmxJanA3SW1sU1pXWmxjbVZ1WTJWVWVYQmxJam94TENKMlkwNWhiV1VpT2lKcGJuTjBhWFIxZEdVaWZYMHNJblZ6WlhKMGVYQmxJanA3SW1sVmMyVnlWSGx3WlNJNk1pd2lkbU5TYjJ4bElqb2lUV0Z5YTJWMGFXNW5JaXdpZG1ORVpYTmpjbWx3ZEdsdmJpSTZJazFoY210bGRHbHVaeUo5TENKbGJXRnBiQ0k2VzNzaWFVVnRZV2xzU1dRaU9qSTFMQ0oyWTBWdFlXbHNJam9pYzNWeVpXNWtZWEl5T0RFeE9EbEFaMjFoYVd3dVkyOXRJaXdpYVVWdWRHbDBlU0k2TWpGOVhTd2ljR2h2Ym1VaU9sdDdJbWxRYUc5dVpTSTZNemdzSW5aalVHaHZibVZPZFcxaVpYSWlPaUk1TnpFMU1qWXhPVE0ySWl3aWFVTnlaV0YwWldSQ2VTSTZNakFzSW1sVmNHUmhkR1ZrUW5raU9qSXdMQ0ppVTNSaGRIVnpJanAwY25WbExDSnBSVzUwYVhSNUlqb3lNU3dpYVZCb2IyNWxWSGx3WlNJNk1YMWRMQ0pqYjNWeWMyVmZiR2x6ZENJNlczc2lhVVZ1ZEdsMGVVTnZkWEp6WlNJNk1qY3NJbWxEYjNWelpVbGtJam8xTENKcFJXNTBhWFI1SWpveU1Td2lZMjkxY25ObElqcDdJbWxTWldabGNtVnVZMlVpT2pVc0luWmpWR2wwYkdVaU9pSkRJaXdpZG1ORVpYTmpjbWx3ZEdsdmJpSTZJa01nVUhKdlozSmhiV2x1WnlJc0luWmpRMjlrWlNJNklrTTFNREF4SWl3aWFWSmxabVZ5Ym1ObFZIbHdaU0k2TWl3aVkyOTFjbk5sWDNSNWNHVWlPbnNpYVZKbFptVnlaVzVqWlZSNWNHVWlPaklzSW5aalRtRnRaU0k2SW1OdmRYSnpaU0o5Zlgwc2V5SnBSVzUwYVhSNVEyOTFjbk5sSWpveU9Dd2lhVU52ZFhObFNXUWlPallzSW1sRmJuUnBkSGtpT2pJeExDSmpiM1Z5YzJVaU9uc2lhVkpsWm1WeVpXNWpaU0k2Tml3aWRtTlVhWFJzWlNJNklrTXJLeUlzSW5aalJHVnpZM0pwY0hScGIyNGlPaUpES3lzZ1VISnZaM0poYldsdVp5SXNJblpqUTI5a1pTSTZJa00xTURBeUlpd2lhVkpsWm1WeWJtTmxWSGx3WlNJNk1pd2lZMjkxY25ObFgzUjVjR1VpT25zaWFWSmxabVZ5Wlc1alpWUjVjR1VpT2pJc0luWmpUbUZ0WlNJNkltTnZkWEp6WlNKOWZYMWRmU3dpYVdGMElqb3hORGN4Tnprd09UTXpmUS5pOWxwQzJNNTI4U2pTNExtRXhjQ0dYdDZ1Z29jN1pVZUlVWGRrc2lHdFZZXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcclxuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChlcnIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgIH1cclxufV0pIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
