var rubyTracker=angular.module("rubyTracker",["ngCookies","ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/login"),e.state("login",{url:"/login",templateUrl:"app/components/login/login.page.html",controller:"LoginController",pageTitle:"Login"}).state("app",{url:"/app","abstract":!0,templateUrl:"app/components/mainContent/main.page.html",controller:"InitController"}).state("app.dashboard",{url:"/dashboard",templateUrl:"app/components/dashboard/dashboard.page.html",controller:"DashboardController",pageTitle:"Dashboard"}).state("app.register",{url:"/register",templateUrl:"app/components/register/register.page.html",controller:"RegisterController",pageTitle:"Register"})}]).run(["$rootScope","$http","$state","$stateParams","$location","$cookies",function(e,t,o,r,a,l){e.pageTitle=o.current.pageTitle,localStorage.getItem("globals")&&(t.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("globals")),e.$on("$stateChangeStart",function(e,t,o,r,l){console.log(a.path());var n=$.inArray(t.name,["login"])===-1,g=localStorage.getItem("globals");n&&!g&&a.path("/login")})}]);

"use strict";angular.module("rubyTracker").factory("AuthFactory",["$http","$cookies","$rootScope","$timeout",function(e,o,t,r){var a={};return console.log("factory"),a.Login=function(o,t){e({method:"POST",url:"http://futureprotech-testingurl.rhcloud.com/api/v1/loginuser",data:$.param({username:o.username,password:o.password}),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e){e=e?{success:e.status,data:e.data}:{success:!1,message:"Username or password is incorrect"},t(e)})},a.SetCredentials=function(o,r,a){t.globals={currentUser:{username:o,token:a}},e.defaults.headers.common.Authorization="Bearer "+a,localStorage.setItem("globals",a)},a.ClearCredentials=function(){t.globals={},localStorage.setItem("globals",""),e.defaults.headers.common.Authorization="Bearer "},a}]);
angular.module("rubyTracker").controller("DashboardController",["$scope","$state","$location","AuthFactory",function(o,r,a,t){}]);

angular.module("rubyTracker").controller("LoginController",["$scope","$state","$location","AuthFactory",function(o,n,e,a){o.credentials={username:"",password:""},console.log("login"),o.authentication=function(o){a.Login(o,function(e){e.success?(a.SetCredentials(o.username,o.password,e.data),n.go("app.dashboard")):console.log("error in login")})}}]);
angular.module("rubyTracker").service("LoginService",["$http","$q",function(e,r){var t=r.defer();this.auth=function(r){return e.post("http://futureprotech-testingurl.rhcloud.com/loginuser",r).then(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}}]);
angular.module("rubyTracker").controller("InitController",["$scope","$state","$location","AuthFactory",function(o,r,t,l){}]);
angular.module("rubyTracker").controller("RegisterController",["$scope","$state","$location","AuthFactory",function(o,r,t,e){}]);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJhcHAucm91dGVzLmpzIiwiYXV0aC5mYWN0b3J5LmpzIiwiZGFzaGJvYXJkL2Rhc2hib2FyZC5jb250cm9sbGVyLmpzIiwiZGFzaGJvYXJkL2Rhc2hib2FyZC5zZXJ2aWNlLmpzIiwibG9naW4vbG9naW4uY29udHJvbGxlci5qcyIsImxvZ2luL2xvZ2luLnNlcnZpY2UuanMiLCJtYWluQ29udGVudC9tYWluLmNvbnRyb2xsZXIuanMiLCJyZWdpc3Rlci9yZWdpc3Rlci5jb250cm9sbGVyLmpzIiwicmVnaXN0ZXIvcmVnaXN0ZXIuc2VydmljZS5qcyJdLCJuYW1lcyI6WyJydWJ5VHJhY2tlciIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIm90aGVyd2lzZSIsInN0YXRlIiwidXJsIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwicGFnZVRpdGxlIiwiYWJzdHJhY3QiLCJydW4iLCIkcm9vdFNjb3BlIiwiJGh0dHAiLCIkc3RhdGUiLCIkc3RhdGVQYXJhbXMiLCIkbG9jYXRpb24iLCIkY29va2llcyIsImN1cnJlbnQiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwiY29tbW9uIiwiJG9uIiwiZXZlbnQiLCJ0b1N0YXRlIiwidG9QYXJhbXMiLCJmcm9tU3RhdGUiLCJmcm9tUGFyYW1zIiwiY29uc29sZSIsImxvZyIsInBhdGgiLCJyZXN0cmljdGVkUGFnZSIsIiQiLCJpbkFycmF5IiwibmFtZSIsImxvZ2dlZEluIiwiZmFjdG9yeSIsIiR0aW1lb3V0Iiwic2VydmljZSIsIkxvZ2luIiwicGFyYW1zIiwiY2FsbGJhY2siLCJtZXRob2QiLCJkYXRhIiwicGFyYW0iLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwiQ29udGVudC1UeXBlIiwic3VjY2VzcyIsInJlc3BvbnNlIiwic3RhdHVzIiwibWVzc2FnZSIsIlNldENyZWRlbnRpYWxzIiwidG9rZW4iLCJnbG9iYWxzIiwiY3VycmVudFVzZXIiLCJzZXRJdGVtIiwiQ2xlYXJDcmVkZW50aWFscyIsIkF1dGhvcml6YXRpb24iLCIkc2NvcGUiLCJBdXRoRmFjdG9yeSIsImNyZWRlbnRpYWxzIiwiYXV0aGVudGljYXRpb24iLCJnbyIsIiRxIiwiZGVmZXJyZWQiLCJkZWZlciIsInRoaXMiLCJhdXRoIiwiY3JldGVudGlhbHMiLCJwb3N0IiwidGhlbiIsInJlc29sdmUiLCJlcnJvciIsInJlamVjdCIsInByb21pc2UiXSwibWFwcGluZ3MiOiJBQUFBLEdBQUlBLGFBQWNDLFFBQVFDLE9BQU8sZUFBZ0IsWUFBYSxjQUM3REMsUUFBUSxpQkFBa0IscUJBQXNCLFNBQVVDLEVBQWdCQyxHQWV6RUEsRUFBbUJDLFVBQVUsVUFHN0JGLEVBQ0dHLE1BQU0sU0FDTEMsSUFBSyxTQUNMQyxZQUFhLHVDQUNiQyxXQUFZLGtCQUNaQyxVQUFXLFVBRVpKLE1BQU0sT0FDTEMsSUFBSyxPQUNMSSxZQUFVLEVBQ1ZILFlBQWEsNENBQ2JDLFdBQVksbUJBRWJILE1BQU0saUJBQ0xDLElBQUssYUFDTEMsWUFBYSwrQ0FDYkMsV0FBWSxzQkFDWkMsVUFBVyxjQUVaSixNQUFNLGdCQUNMQyxJQUFLLFlBQ0xDLFlBQWEsNkNBQ2JDLFdBQVkscUJBQ1pDLFVBQVcsZ0JBRWJFLEtBQUssYUFBYyxRQUFTLFNBQVUsZUFBZ0IsWUFBYSxXQUFZLFNBQVVDLEVBQVlDLEVBQU9DLEVBQVFDLEVBQWNDLEVBQVdDLEdBQzdJTCxFQUFXSCxVQUFZSyxFQUFPSSxRQUFRVCxVQUVsQ1UsYUFBYUMsUUFBUSxhQUNyQlAsRUFBTVEsU0FBU0MsUUFBUUMsT0FBc0IsY0FBSSxVQUFZSixhQUFhQyxRQUFRLFlBRXRGUixFQUFXWSxJQUFJLG9CQUNYLFNBQVVDLEVBQU9DLEVBQVNDLEVBQVVDLEVBQVdDLEdBSzNDQyxRQUFRQyxJQUFJZixFQUFVZ0IsT0FDdEIsSUFBSUMsR0FBaUJDLEVBQUVDLFFBQVFULEVBQVFVLE1BQU8sZUFDMUNDLEVBQVdsQixhQUFhQyxRQUFRLFVBQ2hDYSxLQUFtQkksR0FDbkJyQixFQUFVZ0IsS0FBSztBQzVEL0I7QUNtQ0EsWUFFQWpDLFNBQVFDLE9BQU8sZUFBZXNDLFFBQVEsZUFDakMsUUFBUyxXQUFZLGFBQWMsV0FDaEMsU0FBVXpCLEVBQU9JLEVBQVVMLEVBQVkyQixHQUNuQyxHQUFJQyxLQTRDSixPQTNDQVYsU0FBUUMsSUFBSSxXQUVaUyxFQUFRQyxNQUFRLFNBQVVDLEVBQVFDLEdBRzdCOUIsR0FDRytCLE9BQVEsT0FDUnRDLElBQUssK0RBQ0x1QyxLQUFNWCxFQUFFWSxPQUNKQyxTQUFZTCxFQUFPSyxTQUNuQkMsU0FBWU4sRUFBT00sV0FFdkIxQixTQUFXMkIsZUFBZ0IsdUNBQzVCQyxRQUFRLFNBQVVDLEdBRVRBLEVBREFBLEdBQ2FELFFBQVNDLEVBQVNDLE9BQVFQLEtBQU1NLEVBQVNOLE9BRXpDSyxTQUFTLEVBQU9HLFFBQVMscUNBRTFDVixFQUFTUSxNQUdyQlgsRUFBUWMsZUFBaUIsU0FBVVAsRUFBVUMsRUFBVU8sR0FFbkQzQyxFQUFXNEMsU0FDUEMsYUFDSVYsU0FBVUEsRUFDVlEsTUFBT0EsSUFJZjFDLEVBQU1RLFNBQVNDLFFBQVFDLE9BQXNCLGNBQUksVUFBWWdDLEVBRTdEcEMsYUFBYXVDLFFBQVEsVUFBV0gsSUFHcENmLEVBQVFtQixpQkFBbUIsV0FDdkIvQyxFQUFXNEMsV0FFWHJDLGFBQWF1QyxRQUFRLFVBQVUsSUFDL0I3QyxFQUFNUSxTQUFTQyxRQUFRQyxPQUFPcUMsY0FBZ0IsV0FHM0NwQjtBQ3BGbkJ6QyxRQUFRQyxPQUFPLGVBQ2RRLFdBQVcsdUJBQXdCLFNBQVUsU0FBVSxZQUFhLGNBQWUsU0FBVXFELEVBQVEvQyxFQUFRRSxFQUFXOEM7QUNEekg7QUNBQS9ELFFBQVFDLE9BQU8sZUFBZVEsV0FBVyxtQkFBb0IsU0FBVSxTQUFVLFlBQWEsY0FBZSxTQUFVcUQsRUFBUS9DLEVBQVFFLEVBQVc4QyxHQUM5SUQsRUFBT0UsYUFDSGhCLFNBQVUsR0FDVkMsU0FBVSxJQUVkbEIsUUFBUUMsSUFBSSxTQUNaOEIsRUFBT0csZUFBaUIsU0FBVXRCLEdBQzlCb0IsRUFBWXJCLE1BQU1DLEVBQVEsU0FBVVMsR0FDNUJBLEVBQVNELFNBQ1RZLEVBQVlSLGVBQWVaLEVBQU9LLFNBQVVMLEVBQU9NLFNBQVVHLEVBQVNOLE1BQ3RFL0IsRUFBT21ELEdBQUcsa0JBRVZuQyxRQUFRQyxJQUFJO0FDWjVCaEMsUUFBUUMsT0FBTyxlQUFld0MsUUFBUSxnQkFBaUIsUUFBUyxLQUFNLFNBQVMzQixFQUFPcUQsR0FFbEYsR0FBSUMsR0FBV0QsRUFBR0UsT0FDbEJDLE1BQUtDLEtBQU8sU0FBVUMsR0FRbEIsTUFQQTFELEdBQU0yRCxLQUFLLHdEQUF3REQsR0FDbEVFLEtBQUssU0FBU3RCLEdBQ1hnQixFQUFTTyxRQUFRdkIsSUFDbEIsU0FBU3dCLEdBQ1JSLEVBQVNTLE9BQU9ELEtBR2JSLEVBQVNVO0FDWHhCOUUsUUFBUUMsT0FBTyxlQUNkUSxXQUFXLGtCQUFtQixTQUFVLFNBQVUsWUFBYSxjQUFlLFNBQVVxRCxFQUFRL0MsRUFBUUUsRUFBVzhDO0FDRHBIL0QsUUFBUUMsT0FBTyxlQUNkUSxXQUFXLHNCQUF1QixTQUFVLFNBQVUsWUFBYSxjQUFlLFNBQVVxRCxFQUFRL0MsRUFBUUUsRUFBVzhDO0FDRHhIIiwiZmlsZSI6ImFwcGxpY2F0aW9uLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBydWJ5VHJhY2tlciA9IGFuZ3VsYXIubW9kdWxlKCdydWJ5VHJhY2tlcicsIFtcIm5nQ29va2llc1wiLCBcInVpLnJvdXRlclwiXSlcclxuLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgJyR1cmxSb3V0ZXJQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XHJcbiAgICAvLyB2YXIgYXV0aGVudGljYXRlZCA9IFsnJHEnLCAnQXV0aEZhY3RvcnknLCBmdW5jdGlvbiAoJHEsIEF1dGhGYWN0b3J5KSB7XHJcbiAgICAvLyAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuICAgIC8vICAgICBBdXRoRmFjdG9yeS5pc0xvZ2dlZEluKClcclxuICAgIC8vICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGlzTG9nZ2VkSW4pIHtcclxuICAgIC8vICAgICAgICAgICAgIGlmIChpc0xvZ2dlZEluKSB7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xyXG4gICAgLy8gICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgIC8vICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoJ05vdCBsb2dnZWQgaW4nKTtcclxuICAgIC8vICAgICAgICAgICAgIH1cclxuICAgIC8vICAgICAgICAgfSk7XHJcbiAgICAvLyAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAvLyB9XTtcclxuICBcclxuLy8gICBGb3IgYW55IHVubWF0Y2hlZCB1cmwsIHJlZGlyZWN0IHRvIC9zdGF0ZTFcclxuICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKFwiL2xvZ2luXCIpO1xyXG4gIFxyXG4vLyAgIE5vdyBzZXQgdXAgdGhlIHN0YXRlc1xyXG4gICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAuc3RhdGUoJ2xvZ2luJywge1xyXG4gICAgICB1cmw6IFwiL2xvZ2luXCIsXHJcbiAgICAgIHRlbXBsYXRlVXJsOiBcImFwcC9jb21wb25lbnRzL2xvZ2luL2xvZ2luLnBhZ2UuaHRtbFwiLFxyXG4gICAgICBjb250cm9sbGVyOiAnTG9naW5Db250cm9sbGVyJyxcclxuICAgICAgcGFnZVRpdGxlOiAnTG9naW4nXHJcbiAgICB9KVxyXG4gICAgLnN0YXRlKCdhcHAnLCB7XHJcbiAgICAgIHVybDogXCIvYXBwXCIsXHJcbiAgICAgIGFic3RyYWN0OiB0cnVlLFxyXG4gICAgICB0ZW1wbGF0ZVVybDogXCJhcHAvY29tcG9uZW50cy9tYWluQ29udGVudC9tYWluLnBhZ2UuaHRtbFwiLFxyXG4gICAgICBjb250cm9sbGVyOiAnSW5pdENvbnRyb2xsZXInXHJcbiAgICB9KVxyXG4gICAgLnN0YXRlKCdhcHAuZGFzaGJvYXJkJywge1xyXG4gICAgICB1cmw6IFwiL2Rhc2hib2FyZFwiLFxyXG4gICAgICB0ZW1wbGF0ZVVybDogXCJhcHAvY29tcG9uZW50cy9kYXNoYm9hcmQvZGFzaGJvYXJkLnBhZ2UuaHRtbFwiLFxyXG4gICAgICBjb250cm9sbGVyOiAnRGFzaGJvYXJkQ29udHJvbGxlcicsXHJcbiAgICAgIHBhZ2VUaXRsZTogJ0Rhc2hib2FyZCdcclxuICAgIH0pXHJcbiAgICAuc3RhdGUoJ2FwcC5yZWdpc3RlcicsIHtcclxuICAgICAgdXJsOiBcIi9yZWdpc3RlclwiLFxyXG4gICAgICB0ZW1wbGF0ZVVybDogXCJhcHAvY29tcG9uZW50cy9yZWdpc3Rlci9yZWdpc3Rlci5wYWdlLmh0bWxcIixcclxuICAgICAgY29udHJvbGxlcjogJ1JlZ2lzdGVyQ29udHJvbGxlcicsXHJcbiAgICAgIHBhZ2VUaXRsZTogJ1JlZ2lzdGVyJ1xyXG4gICAgfSk7XHJcbn1dKS5ydW4oWyckcm9vdFNjb3BlJywgJyRodHRwJywgJyRzdGF0ZScsICckc3RhdGVQYXJhbXMnLCAnJGxvY2F0aW9uJywgJyRjb29raWVzJywgZnVuY3Rpb24gKCRyb290U2NvcGUsICRodHRwLCAkc3RhdGUsICRzdGF0ZVBhcmFtcywgJGxvY2F0aW9uLCAkY29va2llcykge1xyXG4gICAgJHJvb3RTY29wZS5wYWdlVGl0bGUgPSAkc3RhdGUuY3VycmVudC5wYWdlVGl0bGU7XHJcbiAgICBcclxuICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZ2xvYmFscycpKSB7XHJcbiAgICAgICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9ICdCZWFyZXIgJyArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdnbG9iYWxzJyk7IC8vIGpzaGludCBpZ25vcmU6bGluZVxyXG4gICAgfVxyXG4gICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN0YXJ0JyxcclxuICAgICAgICBmdW5jdGlvbiAoZXZlbnQsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMpIHtcclxuICAgICAgICAgICAgLy8kcm9vdFNjb3BlLnBhZ2VUaXRsZSA9IHRvU3RhdGUucGFnZVRpdGxlO1xyXG4gICAgICAgICAgICAvLyB0cmFuc2l0aW9uVG8oKSBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aFxyXG4gICAgICAgICAgICAvLyBhICd0cmFuc2l0aW9uIHByZXZlbnRlZCcgZXJyb3JcclxuICAgICAgICAgICAgLy8gcmVkaXJlY3QgdG8gbG9naW4gcGFnZSBpZiBub3QgbG9nZ2VkIGluIGFuZCB0cnlpbmcgdG8gYWNjZXNzIGEgcmVzdHJpY3RlZCBwYWdlXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCRsb2NhdGlvbi5wYXRoKCkpO1xyXG4gICAgICAgICAgICB2YXIgcmVzdHJpY3RlZFBhZ2UgPSAkLmluQXJyYXkodG9TdGF0ZS5uYW1lLCBbJ2xvZ2luJ10pID09PSAtMTtcclxuICAgICAgICAgICAgdmFyIGxvZ2dlZEluID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2dsb2JhbHMnKTtcclxuICAgICAgICAgICAgaWYgKHJlc3RyaWN0ZWRQYWdlICYmICFsb2dnZWRJbikge1xyXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy9sb2dpbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxufV0pOyIsIiIsIi8vIGFuZ3VsYXIubW9kdWxlKCdydWJ5VHJhY2tlcicpLmZhY3RvcnkoJ0F1dGhGYWN0b3J5JywgWyckcScsICckcm9vdFNjb3BlJywgJyRodHRwJywgJyRzdGF0ZScsXHJcbi8vICAgICBmdW5jdGlvbiAoJHEsICRyb290U2NvcGUsICRodHRwLCAkc3RhdGUpIHtcclxuLy8gICAgICAgICB2YXIgY3VycmVudFVzZXIgPSAnJztcclxuLy8gICAgICAgICB2YXIgZmFjdG9yeSA9IHtcclxuLy8gICAgICAgICAgICAgaXNMb2dnZWRJbjogaXNMb2dnZWRJbixcclxuLy8gICAgICAgICAgICAgZ2V0Q3VycmVudFVzZXI6IGdldFVzZXJJbmZvXHJcbi8vICAgICAgICAgfTtcclxuXHJcbi8vICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTtcclxuLy8gICAgICAgICBmdW5jdGlvbiBpc0xvZ2dlZEluKCkge1xyXG4vLyAgICAgICAgICAgICB2YXIgdXNlcl9pZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyX2lkJyk7XHJcbi8vICAgICAgICAgICAgIGlmICh1c2VyX2lkKSB7XHJcbi8vICAgICAgICAgICAgICAgICB2YXIgdXJsID0gd2luZG93LmRvbWFpblVSTCArICd1c2VyLycgKyB1c2VyX2lkO1xyXG4vLyAgICAgICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwpLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlcykge1xyXG4vLyAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXIgPSByZXM7XHJcbi8vICAgICAgICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbiAoZXJyKSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdsb2dpbicpO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgIC8vIGlmKGVyci5zdGF0dXMgPT0gNDAxKSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgLy8gICAgICRzdGF0ZS5nbygnbG9naW4nKTtcclxuLy8gICAgICAgICAgICAgICAgICAgICAvLyB9XHJcbi8vICAgICAgICAgICAgICAgICB9KTtcclxuLy8gICAgICAgICAgICAgfSBlbHNlIHtcclxuLy8gICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoZmFsc2UpO1xyXG4vLyAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdsb2dpbicpO1xyXG4vLyAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7XHJcbi8vICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICB9O1xyXG5cclxuLy8gICAgICAgICBmdW5jdGlvbiBnZXRVc2VySW5mbygpIHtcclxuLy8gICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRVc2VyO1xyXG4vLyAgICAgICAgIH07XHJcbi8vICAgICAgICAgcmV0dXJuIGZhY3Rvcnk7XHJcbi8vICAgICB9XSk7XHJcblxyXG4ndXNlIHN0cmljdCc7XHJcblxyXG5hbmd1bGFyLm1vZHVsZSgncnVieVRyYWNrZXInKS5mYWN0b3J5KCdBdXRoRmFjdG9yeScsXHJcbiAgICBbJyRodHRwJywgJyRjb29raWVzJywgJyRyb290U2NvcGUnLCAnJHRpbWVvdXQnLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkaHR0cCwgJGNvb2tpZXMsICRyb290U2NvcGUsICR0aW1lb3V0KSB7XHJcbiAgICAgICAgICAgIHZhciBzZXJ2aWNlID0ge307XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdmYWN0b3J5Jyk7XHJcbiAgICAgICAgICAgIC8vJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5wb3N0WydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgnO1xyXG4gICAgICAgICAgICBzZXJ2aWNlLkxvZ2luID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIC8qIFVzZSB0aGlzIGZvciByZWFsIGF1dGhlbnRpY2F0aW9uXHJcbiAgICAgICAgICAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbiAgICAgICAgICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgICAgIHVybDogXCJodHRwOi8vZnV0dXJlcHJvdGVjaC10ZXN0aW5ndXJsLnJoY2xvdWQuY29tL2FwaS92MS9sb2dpbnVzZXJcIixcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiAkLnBhcmFtKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ1c2VybmFtZVwiOiBwYXJhbXMudXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwicGFzc3dvcmRcIjogcGFyYW1zLnBhc3N3b3JkXHJcbiAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcgfVxyXG4gICAgICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IHsgc3VjY2VzczogcmVzcG9uc2Uuc3RhdHVzLCBkYXRhOiByZXNwb25zZS5kYXRhIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6ICdVc2VybmFtZSBvciBwYXNzd29yZCBpcyBpbmNvcnJlY3QnIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBzZXJ2aWNlLlNldENyZWRlbnRpYWxzID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBwYXNzd29yZCwgdG9rZW4pIHtcclxuXHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmdsb2JhbHMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogdG9rZW5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSAnQmVhcmVyICcgKyB0b2tlbjsgLy8ganNoaW50IGlnbm9yZTpsaW5lXHJcbiAgICAgICAgICAgICAgICAvLyRjb29raWVzLnB1dCgnZ2xvYmFscycsIHdpbmRvdy5idG9hKCRyb290U2NvcGUuZ2xvYmFscykpO1xyXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2dsb2JhbHMnLCB0b2tlbik7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBzZXJ2aWNlLkNsZWFyQ3JlZGVudGlhbHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmdsb2JhbHMgPSB7fTtcclxuICAgICAgICAgICAgICAgIC8vJGNvb2tpZXMucmVtb3ZlKCdnbG9iYWxzJyk7XHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZ2xvYmFscycsJycpO1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb24uQXV0aG9yaXphdGlvbiA9ICdCZWFyZXIgJztcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlO1xyXG4gICAgICAgIH1dKTtcclxuXHJcbiIsImFuZ3VsYXIubW9kdWxlKCdydWJ5VHJhY2tlcicpXHJcbi5jb250cm9sbGVyKCdEYXNoYm9hcmRDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJHN0YXRlJywgJyRsb2NhdGlvbicsICdBdXRoRmFjdG9yeScsIGZ1bmN0aW9uICgkc2NvcGUsICRzdGF0ZSwgJGxvY2F0aW9uLCBBdXRoRmFjdG9yeSkge1xyXG5cclxufV0pOyIsIiIsImFuZ3VsYXIubW9kdWxlKCdydWJ5VHJhY2tlcicpLmNvbnRyb2xsZXIoJ0xvZ2luQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRzdGF0ZScsICckbG9jYXRpb24nLCAnQXV0aEZhY3RvcnknLCBmdW5jdGlvbiAoJHNjb3BlLCAkc3RhdGUsICRsb2NhdGlvbiwgQXV0aEZhY3RvcnkpIHtcclxuICAgICRzY29wZS5jcmVkZW50aWFscyA9IHtcclxuICAgICAgICB1c2VybmFtZTogJycsXHJcbiAgICAgICAgcGFzc3dvcmQ6ICcnXHJcbiAgICB9O1xyXG4gICAgY29uc29sZS5sb2coJ2xvZ2luJyk7XHJcbiAgICAkc2NvcGUuYXV0aGVudGljYXRpb24gPSBmdW5jdGlvbiAocGFyYW1zKSB7XHJcbiAgICAgICAgQXV0aEZhY3RvcnkuTG9naW4ocGFyYW1zLCBmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgIEF1dGhGYWN0b3J5LlNldENyZWRlbnRpYWxzKHBhcmFtcy51c2VybmFtZSwgcGFyYW1zLnBhc3N3b3JkLCByZXNwb25zZS5kYXRhKTtcclxuICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnYXBwLmRhc2hib2FyZCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJlcnJvciBpbiBsb2dpblwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxufV0pOyIsImFuZ3VsYXIubW9kdWxlKCdydWJ5VHJhY2tlcicpLnNlcnZpY2UoJ0xvZ2luU2VydmljZScsIFsnJGh0dHAnLCAnJHEnLCBmdW5jdGlvbigkaHR0cCwgJHEpIHtcclxuXHJcbiAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgdGhpcy5hdXRoID0gZnVuY3Rpb24gKGNyZXRlbnRpYWxzKSB7XHJcbiAgICAgICAgJGh0dHAucG9zdChcImh0dHA6Ly9mdXR1cmVwcm90ZWNoLXRlc3Rpbmd1cmwucmhjbG91ZC5jb20vbG9naW51c2VyXCIsY3JldGVudGlhbHMpXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXNwb25zZSk7XHJcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICB9IFxyXG59XSkiLCJhbmd1bGFyLm1vZHVsZSgncnVieVRyYWNrZXInKVxyXG4uY29udHJvbGxlcignSW5pdENvbnRyb2xsZXInLCBbJyRzY29wZScsICckc3RhdGUnLCAnJGxvY2F0aW9uJywgJ0F1dGhGYWN0b3J5JywgZnVuY3Rpb24gKCRzY29wZSwgJHN0YXRlLCAkbG9jYXRpb24sIEF1dGhGYWN0b3J5KSB7XHJcblxyXG59XSk7IiwiYW5ndWxhci5tb2R1bGUoJ3J1YnlUcmFja2VyJylcclxuLmNvbnRyb2xsZXIoJ1JlZ2lzdGVyQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJyRzdGF0ZScsICckbG9jYXRpb24nLCAnQXV0aEZhY3RvcnknLCBmdW5jdGlvbiAoJHNjb3BlLCAkc3RhdGUsICRsb2NhdGlvbiwgQXV0aEZhY3RvcnkpIHtcclxuXHJcbn1dKTsiLCIiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
